# Template file for 'r8125-dkms'
pkgname=r8125-dkms
version=9.003.05
revision=1
_gitrev=34f17465e87f3237eb565cfa8fc5fb803f0c2402
archs=noarch
wrksrc="r8125-${version}"
depends="dkms"
short_desc="Realtek RTL8125 driver (DKMS)"
maintainer="Anton Afanasyev <anton@doubleasoftware.com>"
license="GPL-2.0-only"
homepage="https://www.realtek.com/"
distfiles="https://github.com/ibmibmibm/r8125/archive/${version}.tar.gz"
checksum=75196ec98afcefbb6706307104d32131a27abba24ac333633790264968d548d6
dkms_modules="r8125 ${version}"

do_install() {
	vmkdir /usr/src/r8125-${version}
	vcopy "src/*" usr/src/r8125-${version}
	vinstall ${FILESDIR}/dkms.conf 644 usr/src/r8125-${version}
	sed -i -e "s/@VERSION@/${version}-${revision}/" ${PKGDESTDIR}/usr/src/r8125-${version}/dkms.conf

	# modules-load.d(5) file.
	vmkdir usr/lib/modules-load.d
	echo "r8125" > ${DESTDIR}/usr/lib/modules-load.d/r8125.conf
	chmod 644 ${DESTDIR}/usr/lib/modules-load.d/r8125.conf
}
